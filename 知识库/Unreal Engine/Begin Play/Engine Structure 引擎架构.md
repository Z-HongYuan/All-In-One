![[Engine_Structure.png]][官方视频](https://dev.epicgames.com/community/learning/tutorials/98E/unreal-engine-begin-play-engine-structure?source=0w)

从高层次上概述构成虚幻引擎基础的引擎结构和功能。
从引擎架构到如何构建你的游戏

---

1. # 引擎源代码

通过Epic下载引擎版本

勾选引擎源码,可以将源码添加进IDE中查看,但是无法修改,可以DebugGame

通过Github来Clone源码版本的引擎,并且添加进SVN或者P4来追踪最新的分支

优点是可以查看源码

扩展引擎,创建专用服务器,移植到新平台等作用

将项目与源码引擎放在一起,版本选择器就会关联对应的引擎版本

2. # 文件夹结构

引擎文件夹结构与项目文件夹结构十分相似

- **Content**
	文件夹包含所有的资产,请不要使用文件管理器打开,这是用于引擎使用的二进制文件
	引擎文件引用路径为绝对路径,移动文件使用内容浏览器,这样引擎可以更新引用

- **Binaries**
	包含Debug的文件和虚幻构建工具编译的可执行文件

- **Config**
	保存项目设置的文件夹,比如各种ini文件
	项目中的ini会覆盖引擎的基础ini文件,可以复制源引擎的ini文件用于覆盖
	包含平台文件ini,项目文件同样会覆盖,特定平台的ini设置

- **Saved**
	首次启动项目时生成的,包含所有本地设置和生成的某些数据
	引擎会偶尔自动保存修改过的资产
	可以在AutoSaved文件夹内,找寻对应的资产并进行更新
	Saved中的Config文件夹包含项目本地配置的所有重载副本
	ini文件优先级: 引擎ini<项目ini<项目中Saved的ini
	

- **Intermediate**
	生成Source文件的中间代码,如果不能启动,请删除后重新编译

- **Crashes**
	包含崩溃的文件,例如Log,dmp文件,导入vs中以查看崩溃时的堆栈和在内存中的一些变量值

- **Logs**
	保存引擎生成的日志文件

  

如果需要源码管理请只控制: **`Config, Content, Source, Uproject`****这几个文件夹**

可以在项目根目录下创建SourceAsset文件夹,用于导入文件使用,如果文件更新,直接使用重新导入即可,比较方便

- **Plugin**
    
	引擎插件文件夹,可以创建自定义插件到Plugin文件夹中

  

**项目使用Uproject文件定义管理,包含元数据,模块定义,以及对插件的启用禁用的管理,还可以管理关联引擎的版本**

  

3. # 资产管理

资产文件夹通过引擎管理

导入使用分为外部使用DDC软件,内部通过引擎创建(蓝图,粒子系统等)

使用资产验证插件,保证命名规范,纹理分辨率,等

导入一个资产后,会新建一个对应的资产文件,包含资产的所有属性和以未压缩格式保存的资产原始数据,为了在打包时对目标平台进行对应的优化(Cooking/烘焙)

DDC共享派生数据

重定向器,在每次移动,书暗处,重命名的时候创建,类似于指针指向文件的新位置

  

可以通过资产管理器定义主要资产类型和次要资产类型,主要资产负责次要资产的加载,次要资产都是其他资产

例如主要资产->关卡.在加载关卡时,还会加载关卡中放置的所有资产

  

4. # 分析工具
    

例如本地化控制面板.等实用工具.

可以链接到运行的游戏进行处理

设备管理器和设备输出日志链接当前电脑并且显示

游戏会话管理器,可以管理游戏会话并且链接例如自动化测试,控制台,(新)分析器等

  

5. # 构建管线
    

用于发布游戏,打包项目

构建管线由虚幻引擎自动化工具负责

控制方法:

1. 直接在引擎编辑器中运行基础的打包流程
    
2. 使用项目启动程序,创建特殊版本
    
3. 使用命令列表,命令行
    

  

项目中包含SourceCode,第一步就是构建配置

可以指定构建的配置,构建配置由目标和状态组成

例如,需要构建独立进程游戏,可以选择Editor,Client,Server

  

烘焙:为目标平台优化资产

可以选择烘焙资产,或者运行中烘焙

  

在引用查看器中:白色线是硬引用,紫色线是软引用

硬引用会在关联资产加载的时候自动加载,软引用资产需要手动加载

.结束
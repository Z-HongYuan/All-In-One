**在函数重载中, 使用蓝图安全线程更新函数来更新所需要的数据**

**使用动画接口解耦状态层, 逻辑层, 数据层**

# 同步组

**实现动画切换时脚步之间的等同百分比**, 丝滑进入, 不会出现**卡脚**的情况

原理是将两个动画资产之间的脚步标记映射切换

**前置: 需要在动画序列上具有脚步标记**

在动画序列上的同步组选项上开启

设置选项为同步组, 设置相同的名称

# 八向移动 (Look Mode)

八向移动作为角色面朝摄像机方向的专属, 因为在速度模式下, 人物会自动转身, 那时候需要考虑的是旋转的问题

Velocity Mode(速度模式)**也许**不需要八向移动, 只需要向前/转弯 (旋转)/倾斜

Locking 模式下是角色一直朝向摄像机方向, 需要实现八向移动, 也可以通过扭曲节点将四向移动扩展为八向移动

使用朝向扭曲节点扩展

在朝向扭曲节点中, 填入所需要的参数, 就能实现从四方向移动, 转换为八向移动

**如果动画系统一开始就为八向移动设计, 那么无论是 LookMode 还是 VelocityMode 都能使用**

# 步幅适配

使用另一个扭曲节点, 通过所需要的参数, 扭曲步幅的长短适配

如果速度快, 那么角色的步幅就迈的大, 如果速度慢, 那么步幅就迈的小

**一般步幅适配扭曲和朝向扭曲是一起使用的, 通常需要判断是否需要这个函数, 例如在 Idle 状态中就不需要这两个函数节点, 而在 Start 或者 Cycle 状态中, 就需要这两个节点.**

# 跳跃下落

通过动画蓝图更新离地距离判断是否下落或者接地等状态

![[Pasted image 20250425231416.png]]
![](https://jsgqfsm5h1r9.sg.larksuite.com/space/api/box/stream/download/asynccode/?code=ZTQ1NmVlZTk3ZDk0OWUzNzY0YzlmM2M3MWMwM2Q4ZWRfcE1hSjY0NTlFZFlLUFdTeTlEeTF3eGxJcnY1UlJWTk5fVG9rZW46UUwyd2JPM0Rab1FxYWp4VGdzWGxZVEJoZ0xnXzE3NDU1OTM5NDM6MTc0NTU5NzU0M19WNA)

跳跃下落是由状态切换而来的, 其中跳跃所需要的数据为射线检测, 所以不能使用蓝图安全更新函数, 需要在蓝图面板内通过更新动画 Tick 获取所需要的信息

# 距离匹配

**用于确保角色动画与实际游戏中的移动距离保持一致**

其中使用了序列求值器来使用距离匹配函数

距离匹配在非循环动画比如起步, 停止里面用

在序列求值器的更新函数里面

距离匹配需要人物移动距离

## **按距离匹配显式时间**

![[Pasted image 20250425231437.png]]

根据每帧位移动态设置动画播放进度

需要序列求值器

浮点就是每帧位移距离

曲线就是通过动画里面求值获得动画的位移距离

## 每帧移速匹配播放速率

更新函数循环动画时使用, 一般在在 Cycle(循环) 状态下使用

因为在循环播放的动画内, 一般不需要考虑动画的行进状态, 只需要考虑控制动画的播放速度来匹配角色速度

![[Pasted image 20250425231512.png]]

### 距离匹配到停止点

停止动画时使用

更新函数中使用

![[Pasted image 20250425231520.png]]

预测停止点

![[Pasted image 20250425231529.png]]

![[Pasted image 20250425231537.png]]

用属性存取读取移动组件里面的数据

---

# 1. 引擎架构分层

> 1. 引擎采用分层架构设计
> 2. 层级越低的越稳定, 层级越高的更具灵活性和定制性
> 3. 虚拟世界是由一组时钟组成的 -Tick 函数/tick 函数为入口

## 工具层

- 各种编辑器
- DCC/别人开发的资产生产工具/游戏引擎中各种导入导出器

## 功能层

- 渲染, 动画, 物理
- ai/脚本/状态机
- hud/input/Camera
- TIck 函数/时间片, 在每个 tick 时间把所需函数跑一遍
- tick 函数内是世界模拟为先, 渲染为后

> ticklogic
> ![[Pasted image 20250525204437.png]]

> tickrender
> ![[Pasted image 20250525204627.png]]

- 先模拟后渲染
- 多线程/现代游戏引擎都是多核并行计算

## 资源层

> 各种数据资源
> ![[Pasted image 20250525204706.png]]

- 数据引擎化
- 外部数据一单转入到引擎就会变成引擎的资产/assets, 外部数据有可能含有大量的无效数据, 所以需要转化为引擎使用的高效数据
- 数据之间的关系是使用脚本来表述/资产合集, 把各种数据之间关联起来
- 关系/给每个资产发放 GUID/引用
- 资产管理器/管理所有资产的生命周期
- 延迟加载, 根据人物的所需来加载资产, 属于优化比如 ue 的 lod

## 核心层

- 各种底层函数/工具函数, 线代函数等
- 数学库/效率至上
- SIMD
![[Pasted image 20250525204735.png]]

- 数据结构/效率/
- 所以在游戏引擎中都是重写了各种数据结构
- 内存管理
- 数据尽可能放在一起/数据尽可能一起读写/数据尽可能顺序的访问

## 平台层

- 用户的平台, 比如 PC/Mac/PS4
- 适配各种平台
